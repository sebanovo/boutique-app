#!/usr/bin/env shset -eecho "Esperando a PostgreSQL en $POSTGRES_HOST:$POSTGRES_PORT..."until python - <<'PY'import os, socket, syshost=os.environ.get("POSTGRES_HOST","db")port=int(os.environ.get("POSTGRES_PORT","5432"))try:    with socket.create_connection((host, port), timeout=2):        sys.exit(0)except OSError:    sys.exit(1)PYdo  echo "DB no disponible, reintentando..."  sleep 1doneecho "PostgreSQL listo."python manage.py makemigrations || truepython manage.py migrate --noinputif [ -n "$DJANGO_SUPERUSER_EMAIL" ] && [ -n "$DJANGO_SUPERUSER_PASSWORD" ]; then  echo "Creando/actualizando superuser $DJANGO_SUPERUSER_EMAIL ..."  python manage.py shell -c "from django.contrib.auth import get_user_modelimport osU = get_user_model()email = os.getenv('DJANGO_SUPERUSER_EMAIL')pwd = os.getenv('DJANGO_SUPERUSER_PASSWORD')u, created = U.objects.get_or_create(    email=email,    defaults={'is_staff': True, 'is_superuser': True, 'is_active': True})if pwd:    u.set_password(pwd); u.save()print('Superuser listo:', email, '(creado)' if created else '(actualizado)')"else  echo "DJANGO_SUPERUSER_EMAIL/PASSWORD no definidos; omito creación de superuser."fi# >>>>>>>>>>>>>>>>>>>>>>> SUPERUSER <<<<<<<<<<<<<<<<<<<<<<<<<<<<<# Static/Mediaecho "Preparando carpetas de static y media..."mkdir -p /app/staticfiles /app/media || truechmod -R 777 /app/staticfiles /app/media 2>/dev/null || true# collectstatic SOLO si DEBUG no está activocase "$(printf '%s' "$DEBUG" | tr '[:upper:]' '[:lower:]')" in  1|y|yes|true)    echo "DEBUG activo → salto collectstatic"    ;;  *)    echo "Ejecutando collectstatic..."    python manage.py collectstatic --noinput || true    ;;esacecho "Levantando servidor de desarrollo..."python manage.py runserver 0.0.0.0:8000